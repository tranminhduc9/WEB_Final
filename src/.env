# ==============================================
# WEB_FINAL - UNIFIED ENVIRONMENT CONFIGURATION
# ==============================================
# Location: src/.env (Single source of truth)
# Environment: development | staging | production
ENVIRONMENT=development
DEBUG=true

# API Version
API_VERSION=v1

# ==============================================
# DATABASE - POSTGRESQL
# ==============================================
# Main Database - Unified database (port 5433)
DATABASE_URL=postgresql://admin:123456@localhost:5433/travel_db

# Docker Database Credentials (used by docker-compose.yml)
POSTGRES_USER=admin
POSTGRES_PASSWORD=123456
POSTGRES_DB=travel_db
DB_PORT=5433

# Database Pool Settings
DB_POOL_SIZE=10
DB_MAX_OVERFLOW=20
DB_POOL_TIMEOUT=30
DB_POOL_RECYCLE=3600

# pgAdmin Settings
PGADMIN_EMAIL=admin@admin.com
PGADMIN_PASSWORD=admin
PGADMIN_PORT=5050

# ==============================================
# MONGODB - For posts, comments, chatbot logs, reports
# ==============================================
MONGO_URI=mongodb://localhost:27017
MONGO_DB_NAME=hanoi_travel_mongo
MONGO_TIMEOUT=5000

# MongoDB Pool Settings
MONGO_MAX_POOL_SIZE=10
MONGO_MIN_POOL_SIZE=1

# ==============================================
# REDIS - Caching & Rate Limiting
# ==============================================
REDIS_URL=redis://localhost:6379/0
REDIS_HOST=localhost
REDIS_PORT=6379
REDIS_DB=0
REDIS_PASSWORD=

# Redis Connection Settings
REDIS_SOCKET_TIMEOUT=5
REDIS_SOCKET_CONNECT_TIMEOUT=5
REDIS_RETRY_ON_TIMEOUT=true

# ==============================================
# JWT - JSON WEB TOKEN
# ==============================================
# IMPORTANT: Change these in production!
JWT_SECRET_KEY=hanoi-travel-super-secret-key-change-in-production-2024
JWT_ALGORITHM=HS256
JWT_EXPIRATION=3600
REFRESH_TOKEN_EXPIRATION=604800

# ==============================================
# PASSWORD HASHING
# ==============================================
BCRYPT_ROUNDS=12

# ==============================================
# SESSION
# ==============================================
SESSION_SECRET=session-secret-change-in-production

# ==============================================
# RATE LIMITING
# ==============================================
RATE_LIMIT_ENABLED=true
RATE_LIMIT_STORAGE=redis
RATE_LIMIT_DEFAULT_WINDOW=60

# Rate Limits (requests/minute)
# High: 5 req/min (Register, OTP)
# Medium: 20 req/min (Write actions)
# Low: 100 req/min (Read actions)
# Suggest: 200 req/min (Places suggest)
# Login: 10 req/min (special case)

# ==============================================
# EMAIL - SENDGRID
# ==============================================
# Get API key: https://app.sendgrid.com/settings/api_keys
# Verify sender: https://app.sendgrid.com/settings/sender_auth
SENDGRID_API_KEY=
FROM_EMAIL=hvphus@gmail.com
FROM_NAME=Hanoi Travel


# ==============================================
# CLOUDINARY - IMAGE UPLOAD
# ==============================================
CLOUDINARY_CLOUD_NAME=
CLOUDINARY_API_KEY=
CLOUDINARY_API_SECRET=
CLOUDINARY_FOLDER=hanoi-travel

# ==============================================
# FILE UPLOAD
# ==============================================
MAX_FILE_SIZE=5242880
ALLOWED_FILE_TYPES=jpg,jpeg,png,gif,webp
UPLOAD_PATH=uploads

# ==============================================
# CHATBOT - GOOGLE GEMINI AI
# ==============================================
# Get API key from: https://aistudio.google.com/app/apikey
CHATBOT_ENABLED=true
CHATBOT_API_KEY=AIzaSyBwGc5TQ14IpygA8FeJaKdGoIFC2sM238k
CHATBOT_MODEL=gemini-1.5-flash
CHATBOT_TEMPERATURE=0.7
CHATBOT_MAX_TOKENS=2048

# Chatbot Conversation Settings
CHATBOT_MAX_CONVERSATION_LENGTH=50
CHATBOT_REQUESTS_PER_MINUTE=60
CHATBOT_MAX_RETRIES=3
CHATBOT_TIMEOUT=30.0

# Chatbot System Prompt
CHATBOT_SYSTEM_PROMPT=You are a helpful AI assistant for Hanoi Travel, a tourism application. You help users discover places to visit, food to try, and experiences in Hanoi, Vietnam.

# Chatbot Logging
CHATBOT_ENABLE_LOGGING=true
CHATBOT_LOG_LEVEL=INFO

# Chatbot RAG (Future feature)
CHATBOT_ENABLE_RAG=false

# ==============================================
# OPENAI (Optional - for other AI features)
# ==============================================
OPENAI_API_KEY=

# ==============================================
# HUNTER.IO - Email Validation
# ==============================================
# Get free API key from: https://hunter.io/api-key
# Free tier: 50 requests/month
HUNTER_IO_API_KEY=6985d13bbd5def38e23747042722611b8100c927
HUNTER_IO_DEBUG=true

# ==============================================
# CORS - CROSS ORIGIN RESOURCE SHARING
# ==============================================
# Comma-separated list of allowed origins
CORS_ORIGINS=http://localhost:3000,http://localhost:5173,http://127.0.0.1:3000,http://127.0.0.1:5173
CORS_METHODS=GET,POST,PUT,DELETE,OPTIONS,PATCH
CORS_HEADERS=*
CORS_CREDENTIALS=true
CORS_MAX_AGE=86400

# ==============================================
# FRONTEND URL
# ==============================================
FRONTEND_URL=http://localhost:5173

# ==============================================
# LOGGING
# ==============================================
LOG_LEVEL=INFO
LOG_FORMAT=json
ENABLE_REQUEST_LOGGING=true
ENABLE_AUDIT_LOG=true
AUDIT_LOG_FILE=logs/audit.log

# ==============================================
# SEARCH LOGGING
# ==============================================
ENABLE_SEARCH_LOGGING=true
SEARCH_LOG_RETENTION_DAYS=30

# ==============================================
# SECURITY
# ==============================================
# Enable/disable security features
ENABLE_CONTENT_MODERATION=true

# ==============================================
# PERFORMANCE
# ==============================================
ENABLE_COMPRESSION=true
ENABLE_CACHING=true
CACHE_TTL=3600

# ==============================================
# FEATURE FLAGS
# ==============================================
# Registration & Authentication
ENABLE_REGISTRATION=true
ENABLE_EMAIL_VERIFICATION=true
ENABLE_SOCIAL_LOGIN=false

# ==============================================
# SERVER CONFIGURATION
# ==============================================
# Backend Server
BACKEND_HOST=127.0.0.1
BACKEND_PORT=8080

# Frontend Server (Vite)
FRONTEND_DEV_PORT=5173
FRONTEND_PROD_PORT=3000

# ==============================================
# EXTERNAL APIS (Future)
# ==============================================
# Google Maps API (for places, directions)
GOOGLE_MAPS_API_KEY=

# Facebook (for social login)
FACEBOOK_APP_ID=
FACEBOOK_APP_SECRET=

# Google OAuth (for social login)
GOOGLE_CLIENT_ID=
GOOGLE_CLIENT_SECRET=

# ==============================================
# MONITORING & ANALYTICS (Optional)
# ==============================================
# Sentry (Error tracking)
SENTRY_DSN=

# Google Analytics
GA_TRACKING_ID=

# ==============================================
# DEVELOPMENT NOTES
# ==============================================
# 1. For SendGrid SMTP:
#    - Create API key: https://app.sendgrid.com/settings/api_keys
#    - Verify Sender Identity: https://app.sendgrid.com/settings/sender_auth
#    - SMTP_USERNAME is always "apikey" (literal)
#    - SMTP_PASSWORD is your SendGrid API key (starts with SG.)
#
# 2. For Google Gemini API:
#    - Get API key: https://aistudio.google.com/app/apikey
#    - The key above is for demonstration only
#
# 3. For PostgreSQL:
#    - Default username: admin
#    - Default password: 123456
#    - Change these in production!
#
# 4. Security Best Practices:
#    - Change all SECRET keys in production
#    - Use strong passwords (min 32 chars)
#    - Enable SSL/TLS for database connections in production
#    - Use environment-specific .env files
#    - Never commit .env to version control
#
# 5. Rate Limiting:
#    - High (5/min): Register, Login, Forgot Password, Reset Password
#    - Medium (20/min): Create Post, Comment, Upload, Update Profile
#    - Low (100/min): Search, Get Details, View Posts
#    - Suggest (200/min): Places suggest endpoint
#    - Login (10/min): Special tier for login only
